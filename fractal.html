<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fractal Tree - Alex Yalın</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/jpeg" href="assets/avatar.jpg">
    <style>
        body, html { margin: 0; padding: 0; overflow: hidden; background-color: #050505; color: #eee; }
        canvas { display: block; }
        .overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            pointer-events: none;
            z-index: 10;
        }
        .overlay h1 {
            font-family: 'Inter', sans-serif;
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 2px;
            text-shadow: 0 0 10px rgba(255,255,255,0.3);
        }
        .overlay p {
            font-family: 'Lora', serif;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.6);
            margin: 5px 0 0 0;
        }
        .back-link {
            position: absolute;
            bottom: 20px;
            left: 20px;
            font-family: 'Inter', sans-serif;
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.4);
            text-decoration: none;
            border-bottom: 1px solid transparent;
            transition: all 0.3s;
            pointer-events: auto;
        }
        .back-link:hover {
            color: #fff;
            border-bottom-color: #fff;
        }
    </style>
</head>
<body>
    <div class="overlay">
        <h1>Fractal Tree</h1>
        <p>Recursive growth. The mathematics of nature.</p>
    </div>
    
    <a href="gallery.html" class="back-link">&larr; Back to Gallery</a>

    <canvas id="fractalCanvas"></canvas>

    <script>
        const canvas = document.getElementById('fractalCanvas');
        const ctx = canvas.getContext('2d');

        let width, height;
        let time = 0;
        
        // Ağaç parametreleri (Daha doğal görünüm için)
        const maxDepth = 12;
        const branchAngle = Math.PI / 5; // Daha geniş açı
        const lengthRatio = 0.75; 

        function init() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
        }

        function drawTree(x, y, len, angle, depth) {
            ctx.beginPath();
            ctx.save();
            ctx.translate(x, y);
            ctx.rotate(angle);
            
            // Dal kalınlığı: Kökten uca incelme
            ctx.lineWidth = depth * 1.5; 
            
            // Renk: Gövde koyu, uçlar açık/renkli
            // Derinliğe göre renk değişimi
            if (depth > 8) {
                ctx.strokeStyle = '#4a3b2a'; // Koyu Kahve (Gövde)
            } else if (depth > 4) {
                ctx.strokeStyle = '#8c5e3c'; // Açık Kahve (Dallar)
            } else {
                // Yaprak/Çiçek (Pembe/Beyaz - Sakura)
                // Zamanla hafif renk değişimi
                const hue = 320 + Math.sin(time * 0.01 + depth) * 20; 
                ctx.strokeStyle = `hsla(${hue}, 80%, 70%, 0.8)`;
                ctx.lineWidth = depth * 2; // Yapraklar biraz daha dolgun görünsün
            }

            ctx.moveTo(0, 0);
            ctx.lineTo(0, -len);
            ctx.stroke();

            if (depth > 0) {
                // Rüzgar etkisi (Periyodik salınım)
                // Alt dallar az, üst dallar çok sallanır
                const wind = Math.sin(time * 0.002 + depth * 0.5) * 0.02 * (maxDepth - depth);
                
                // Rastgelelik (Doğallık için)
                // Her dal tam simetrik olmasın
                const noise = Math.sin(depth * 132.1) * 0.1;

                // Sağ Dal
                drawTree(0, -len, len * lengthRatio, angle + branchAngle + wind + noise, depth - 1);
                // Sol Dal
                drawTree(0, -len, len * lengthRatio, angle - branchAngle + wind - noise, depth - 1);
                
                // Bazen 3. bir dal çıkar (Daha dolgun görünüm için)
                if (depth > 6 && depth % 2 === 0) {
                     drawTree(0, -len, len * lengthRatio * 0.8, wind, depth - 2);
                }
            }
            ctx.restore();
        }

        function animate() {
            // Hafif iz bırakarak temizle (Rüzgar efekti daha akıcı görünür)
            // Ama tam temizleme yapalım, yoksa ağaç kalınlaşır
            ctx.fillStyle = '#050505';
            ctx.fillRect(0, 0, width, height);

            time++;
            
            // Kökten başla
            // Boyut ekrana göre ölçekli
            const trunkLen = height / 4.5;
            drawTree(width / 2, height, trunkLen, 0, maxDepth);

            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', init);
        
        init();
        animate();
    </script>
</body>
</html>